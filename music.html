<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Музыкальный раздел</title>
<link rel="icon" type="image/png" href="./photo/icon.png">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
<style>
  :root{
    --bg1:#0b0b0f;
    --bg2:#151821;
    --card: rgba(24,24,32,.72);
    --outline: rgba(255,255,255,.06);
    --txt:#f4f6ff;
    --muted:#a9afc7;
    --brand:#2bf08e;
    --brand2:#00c2ff;
  }
  *{box-sizing:border-box;}
  body{
    margin:0;
    color:var(--txt);
    font-family:Inter, system-ui, sans-serif;
    height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    background:linear-gradient(120deg, var(--bg1), var(--bg2));
    overflow-x:hidden;
    animation:bgflow 16s ease-in-out infinite alternate;
    background-size:400% 400%;
  }
  @keyframes bgflow{
    0%{background-position:0% 0%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 100%;}
  }

  /* ---- панель онлайн ---- */
  .online-bar{
    position:fixed;
    top:0;
    left:0;
    right:0;
    background:rgba(20,20,28,.8);
    border-bottom:1px solid var(--outline);
    backdrop-filter:blur(10px);
    -webkit-backdrop-filter:blur(10px);
    color:var(--brand);
    font-weight:700;
    text-align:center;
    padding:10px;
    font-size:16px;
    letter-spacing:0.5px;
    z-index:1000;
    box-shadow:0 2px 15px rgba(0,0,0,.3);
  }

  main{
    flex:1;
    width:100%;
    max-width:1200px;
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:24px;
    padding:100px 20px 140px; /* ↑ отступ сверху из-за панели */
  }
  .card{
    position:relative;
    width:230px;
    background:var(--card);
    border:1px solid var(--outline);
    border-radius:20px;
    padding:22px 20px 26px;
    text-align:center;
    backdrop-filter:blur(12px) saturate(120%);
    -webkit-backdrop-filter:blur(12px) saturate(120%);
    transition:all .25s ease;
    box-shadow:0 10px 25px rgba(0,0,0,.35);
  }
  .card:hover{
    transform:translateY(-6px);
    box-shadow:0 16px 36px rgba(0,0,0,.45);
  }
  .card img{
    width:120px;
    height:120px;
    border-radius:50%;
    object-fit:cover;
    margin-bottom:14px;
    box-shadow:0 8px 25px rgba(0,0,0,.4);
    transition:transform .25s ease;
  }
  .card:hover img{transform:scale(1.08);}
  .card h2{font-size:18px; margin:0 0 12px; font-weight:800;}
  .card a{
    display:inline-block;
    text-decoration:none;
    color:#04130f;
    font-weight:700;
    background:linear-gradient(135deg,var(--brand),var(--brand2));
    border-radius:30px;
    padding:10px 22px;
    transition:.2s;
  }
  .card a:hover{filter:brightness(1.15);}

  footer{
    position:fixed;
    bottom:14px;
    left:14px;
    right:14px;
    display:grid;
    grid-template-columns:1fr auto;
    align-items:center;
    padding:12px 18px;
    background:rgba(20,20,28,.7);
    border-radius:18px;
    border:1px solid var(--outline);
    backdrop-filter:blur(12px) saturate(120%);
    -webkit-backdrop-filter:blur(12px) saturate(120%);
    box-shadow:0 8px 30px rgba(0,0,0,.4);
    color:var(--muted);
  }
  footer .info{
    display:flex;
    align-items:center;
    gap:12px;
  }
  footer img{
    width:54px;
    height:54px;
    border-radius:12px;
    object-fit:cover;
  }
  .text{
    display:flex;
    flex-direction:column;
  }
  .text b{
    font-weight:800;
    font-size:16px;
    color:var(--txt);
  }
  .controls{
    display:flex;
    align-items:center;
    gap:14px;
  }
  .ctl{
    width:48px;
    height:48px;
    border-radius:14px;
    border:1px solid var(--outline);
    background:rgba(255,255,255,.08);
    color:var(--txt);
    display:grid;
    place-items:center;
    font-size:18px;
  }
  .ctl.play{
    background:linear-gradient(135deg,var(--brand),var(--brand2));
    color:#04130f;
    font-weight:700;
    border:none;
    box-shadow:0 6px 20px rgba(0,0,0,.35);
  }

  @media(max-width:900px){
    main{padding-bottom:160px;}
    .card{width:200px;}
  }
  @media(max-width:600px){
    main{flex-direction:column; align-items:center; gap:20px;}
    .card{width:85%; max-width:340px;}
    footer{grid-template-columns:1fr; text-align:center; gap:10px;}
    .info{justify-content:center;}
    .controls{justify-content:center;}
    .ctl{width:64px; height:64px; border-radius:18px; font-size:22px;}
  }
</style>
</head>
<body>

<!-- ===== Панель онлайн ===== -->
<div class="online-bar" id="online-bar">
  Сейчас онлайн: <span id="online-count">—</span>
</div>

<main>
  <div class="card">
    <img src="./photo/cupsize.jpg" alt="">
    <h2>Cupsize</h2>
    <a href="cupsize.html">Слушать</a>
  </div>

  <div class="card">
    <img src="./photo/images.jpg" alt="">
    <h2>Пошлая Молли</h2>
    <a href="molly.html">Слушать</a>
  </div>

  <div class="card">
    <img src="./photo/2cf4dbb354f3022140b487958d6a4c5f.1000x1000x1.png" alt="">
    <h2>Кишлак</h2>
    <a href="kishlak.html">Слушать</a>
  </div>

  <div class="card">
    <img src="./photo/maxresdefault.jpg" alt="">
    <h2>Shadowraze</h2>
    <a href="shadowraze.html">Слушать</a>
  </div>

  <div class="card">
    <img src="./photo/5cc2927fcf61cf10d3eb5efe35abde33.1000x1000x1.png" alt="">
    <h2>Полматери</h2>
    <a href="mother.html">Слушать</a>
  </div>
</main>

<footer>
  <div class="info">
    <img src="./photo/516c405aecc396e3e93326bdf19f3b94.jpg" alt="">
    <div class="text">
      <b>Выберите артиста, чтобы начать</b>
      <span>—</span>
    </div>
  </div>
  <div class="controls">
    <div class="ctl"><i class="fa-solid fa-backward-step"></i></div>
    <div class="ctl play"><i class="fa-solid fa-play"></i></div>
    <div class="ctl"><i class="fa-solid fa-forward-step"></i></div>
  </div>
</footer>

<script>
// === Онлайн-счётчик ===

// Каждые 15 секунд отправляем пинг, чтобы сервер знал, что пользователь активен
setInterval(() => {
  fetch('http://localhost:3000/online', { method: 'POST' })
    .catch(() => {});
}, 15000);

// Функция для обновления числа онлайн
async function updateOnline() {
  try {
    const res = await fetch('http://localhost:3000/online-count');
    const data = await res.json();
    document.getElementById('online-count').textContent = data.online ?? '—';
  } catch (e) {
    document.getElementById('online-count').textContent = '—';
  }
}

// Запускаем при загрузке и обновляем каждые 5 секунд
updateOnline();
setInterval(updateOnline, 5000);
</script>

</body>
</html>
